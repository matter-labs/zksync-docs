---
title: ZKsync Gateway settlement layer
description:
---

ZKsync Gateway is an **optional settlement layer** for ZK chains, including both rollups and validiums. It is purpose-built to
enhance **interoperability**, provide **proof aggregation**, and offer **cost efficiencies** for chains that wish to settle on top of it.

[Learn more about ZKsync Gateway](../../zksync-protocol/gateway/overview) in the protocol documentation.

## Considerations for Using Gateway as a Settlement Layer

When migrating to Gateway, chains need to make sure that their data availability (DA) configurations are properly setup.

### Rollup Chains

Rollups using Gateway must relay pubdata to Ethereum through the `L1Messenger` system contract.
Chains using the [standard pubdata format](https://github.com/matter-labs/era-contracts/blob/release-v27/docs/settlement_contracts/data_availability/rollup_da.md)
can use the [RelayedSLDAValidator](https://github.com/matter-labs/era-contracts/blob/release-v27/l1-contracts/contracts/state-transition/data-availability/RelayedSLDAValidator.sol).
This validator forwards data to Ethereum and restricts updates to authorized sources to prevent incorrect pubdata submission.

### Validium Chains

Validiums can reuse the [ValidiumL1DAValidator](https://github.com/matter-labs/era-contracts/blob/release-v27/l1-contracts/contracts/state-transition/data-availability/ValidiumL1DAValidator.sol)
previously deployed on Ethereum.
DA Validator contracts are available for different data availability solutions, and the chain’s DA configuration must be updated to use the new deployment.

<!-- TODO: add validator contract addresses -->

| DA Layer | Validator contract address |
|--|---|
|Avail| `0x`|
|Celestia | `0x`|
|EigenDA | `0x`|

### Chains with Custom Data Availability

Chains using custom data availability solutions must ensure their DA validation logic is compatible with Gateway and
can be deployed and executed within the Gateway settlement layer.

These considerations determine how the chain’s data availability will function when settling on Gateway instead of directly on Ethereum.

## Running ZKsync Gateway locally

::callout{icon="i-heroicons-exclamation-triangle" color="amber"}
This guide assumes you already have an ecosystem with a ZK chain settling on L1 [as detailed in the quickstart](./quickstart).
::

1. Create a new ZK chain that will become your local gateway chain:

```bash
zkstack chain create \
    --chain-name gateway \
    --chain-id 506 \
    --prover-mode no-proofs \
    --wallet-creation localhost \
    --l1-batch-commit-data-generator-mode rollup \
    --base-token-address 0x0000000000000000000000000000000000000001 \
    --base-token-price-nominator 1 \
    --base-token-price-denominator 1 \
    --set-as-default false \
    --evm-emulator false \
    --ignore-prerequisites --update-submodules false
```

1. Initialise `gateway` chain:

  ```bash
  zkstack chain init \
    --deploy-paymaster \
    --l1-rpc-url=http://localhost:8545 \
    --server-db-url=postgres://postgres:notsecurepassword@localhost:5432 \
    --server-db-name=zksync_server_localhost_gateway \
    --chain gateway --update-submodules false
  ```

1. Transform `gateway` chain from rollup into a ZKsync Gateway settlement layer:

  ```bash
  zkstack chain gateway convert-to-gateway --chain gateway --ignore-prerequisites
  ```

1. Start `gateway` chain server:

  ```bash
  zkstack server --ignore-prerequisites --chain gateway &> ./gateway.log &
  zkstack server wait --ignore-prerequisites --verbose --chain gateway

  ```

1. Migrate existing ZK chain to settle on `gateway`:

  ```bash
  zkstack chain gateway migrate-to-gateway --chain YOUR_CHAIN_NAME --gateway-chain-name gateway
  ```

1. Start your chain server:

  ```bash
  zkstack server --ignore-prerequisites --chain YOUR_CHAIN &> ./era.log &
  ```

## Migrate existing ZK chain to Gateway on testnet or mainnet

TODO
