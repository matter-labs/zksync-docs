---
title: Components
description: Understand the components of a Prividium.
---

Adding privacy to a ZK chain is possible by making changes
to the RPC API and block explorer.
The ZK Stack CLI provides a production-ready implementation
of these changes for you, but they can be customized as needed.

In addition to the standard components of a ZK chain,
the Prividium adds two additional components:

- A Proxy RPC API that filters requests based on the configured permissions
- A block explorer API with privacy protections enabled

::centered-container

![Prividium architecture diagram](/images/zk-stack/prividium-architecture.png)

::

## Proxy RPC API

The proxy RPC API is the main component that enables privacy in the ZK Stack.

In a standard rollup, there is a standard RPC API that provides full access
to transaction data for users.
The proxy RPC is an additional layer in between end users and the chain's standard RPC API.
The proxy layer enables authentication of requests to the standard RPC.

Access to the standard RPC should remain private.
We highly recommend implementing a secure firewall around the standard RPC API.
Only the proxy RPC API endpoint should be publicly shared.

### Setting up the Proxy

After your ecosystem and validium chain are setup,
you can initialize the Proxy API.

:display-partial{path="/zk-stack/prividium/_partials/quickstart/_proxy"}

### Upgrading your Proxy

To upgrade your proxy API to the latest version:

1. Run `zkstackup` to upgrade your version of `zkstack`.
1. Update the `zksync-era` repo in the ecosystem folder.
1. Delete the `private-rpc` Docker container.
1. Re-run the `zkstack private-rpc init` command.
1. Start the server with `zkstack private-rpc run`.

### Configuring the Proxy

In the generated docker compose file, you can configure
the environment variables as needed.

The service is configured through six key environment variables:

- `CORS_ORIGIN`: sets the web-origin domain that the API will accept requests from.
  It defaults to the local port where the block explorer runs.
  It can also be an array of domains separated by a comma.
- `CREATE_TOKEN_SECRET`: the shared secret used to verify clients requesting to create new access tokens.
- `PERMISSIONS_YAML_PATH`: points to the YAML file that lists the access rules enforced by the proxy.
- `DATABASE_URL`: points to the chain's PostgreSQL database.
- `PORT`: the port where the proxy itself listens (`4041` by default).
- `TARGET_RPC`: the standard internal RPC API endpoint the proxy forwards validated requests to.

### Configuring Access

To configure access to different smart contracts on your chain,
Prividium uses a simple YAML file.
Edits to the permissions file only require a restart of the Proxy service to be applied.

:display-partial{path="/zk-stack/prividium/_partials/quickstart/_access"}

## Authenticated Block Explorer

Like the RPC layer, the block explorer is split into to two versions with the prividium framework:
one public-facing and one internal.
The internal block explorer mirrors a standard block explorer for a public chain.
All transaction data can be accessed by the chain operators.

The public-facing block explorer uses the the Proxy RPC API so that the configured access rules are applied.

(images or gif)

(commands)

## What data is posted publicly?

Only the state root hashes and ZK proofs are publicly posted.
No information about the transaction details can be derived from public onchain data.

The only other public information includes deposits and withdrawls
to or from rollup chains, as the information will be public on the rollup.
Deposits and withdrawls to or from other Prividium chains remain fully private,
only visible to the involved chain operators.

The full transaction data stays in the chain database,
fully visible only to the chain operators.

To learn more about data availability and how validiums work in the ZK Stack,
check out the [Validium page](/zk-stack/running/validium).
