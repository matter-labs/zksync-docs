---
title: USDCBridge
description: A class for interacting with the custom USDC bridge.
tags: ["zksync", "providers", "integration"]
---

USDCBridge class provides methods for depositing and withdrawing USDC tokens using custom [USDC bridge](https://github.com/matter-labs/usdc-bridge).

### `constructor(wallet: Wallet)`

Creates a `USDCBridge` object.

**Parameters:**

| Parameter  | Type     | Description               |
| ---------- | -------- | ------------------------- |
| `wallet`   | `Wallet`| ZKsync wallet instance.   |


**Example:**

```ts
import { Provider, types, Wallet, USDCBridge } from "zksync-ethers";

const PRIVATE_KEY = "<PRIVATE_KEY>";
const provider = Provider.getDefaultProvider(types.Network.Sepolia);
const wallet = new Wallet(PRIVATE_KEY, provider, ethProvider);

const usdcBridge = new USDCBridge(wallet);
```

### `deposit`

Deposits USDC tokens using the custom [USDC bridge](https://github.com/matter-labs/usdc-bridge)

#### Inputs

| Parameter                           | Type                                                                     | Description                                                                                                                                                                                                                            |
|-------------------------------------| ------------------------------------------------------------------------ |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `transaction.token`                 | `Address`                                                                | The address of the USDC token.       |
| `transaction.amount`                | `BigNumberish`                                                           | The amount of the token to deposit.                                                                                                                                                                                                    |
| `transaction.to?`                   | `Address`                                                                | The address that will receive the deposited tokens on L2.                                                                                                                                                                   |
| `transaction.operatorTip?`          | `BigNumberish`                                                           | (_currently is not used_) If the ETH value passed with the transaction is not explicitly stated in the overrides, this field will be equal to the tip the operator will receive on top of the base cost of the transaction. |
| `transaction.bridgeAddress`        | `Address`                                                                | The address of the USDC bridge contract to be used.                                                                                            |
| `transaction.approveERC20?`         | `boolean`                                                                | Whether or not should the token approval be performed under the hood. Set this flag to `true` if you bridge a USDC token and didn't call the `approveERC20` function beforehand.                                          |
| `transaction.l2GasLimit?`           | `BigNumberish`                                                           | Maximum amount of L2 gas that transaction can consume during execution on L2.                                                                                                                                               |
| `transaction.gasPerPubdataByte?`    | `BigNumberish`                                                           | The L2 gas price for each published L1 calldata byte.                                         |
| `transaction.refundRecipient?`      | `Address`                                                                | The address on L2 that will receive the refund for the transaction. If the transaction fails, it will also be the address to receive l2Value.                                                                               |
| `transaction.overrides?`            | [`ethers.Overrides`](https://docs.ethers.org/v6/api/contract/#Overrides) | Transaction's overrides which may be used to pass L1 `gasLimit`, `gasPrice`, `value`, etc.                                                                                                                                  |
| `transaction.approveOverrides?`     | [`ethers.Overrides`](https://docs.ethers.org/v6/api/contract/#Overrides) | Transaction's overrides which may be used to pass L1 `gasLimit`, `gasPrice`, `value`, etc.                                                                                                                                  |

```ts
async deposit(transaction: {
  token: Address;
  amount: BigNumberish;
  to?: Address;
  operatorTip?: BigNumberish;
  bridgeAddress: Address;
  approveERC20?: boolean;
  approveBaseERC20?: boolean;
  l2GasLimit?: BigNumberish;
  gasPerPubdataByte?: BigNumberish;
  refundRecipient?: Address;
  overrides?: Overrides;
  approveOverrides?: Overrides;
}): Promise<PriorityOpResponse>
```

#### Example

```ts
import { Wallet, Provider, types, USDCBridge } from "zksync-ethers";
import { ethers } from "ethers";

const PRIVATE_KEY = "<WALLET_PRIVATE_KEY>";
const USDC_TOKEN_L1_ADDRESS = "<USDC_TOKEN_ADDRESS>";
const USDC_BRIDGE_L1_ADDRESS = "<USDC_BRIDGE_L1_ADDRESS>";
const AMOUNT = "5";

const provider = Provider.getDefaultProvider(types.Network.Sepolia);
const ethProvider = ethers.getDefaultProvider("sepolia");
const wallet = new Wallet(PRIVATE_KEY, provider, ethProvider);
const usdcBridge = new USDCBridge(wallet);

const depositTx = await usdcBridge.deposit({
  token: USDC_TOKEN_L1_ADDRESS,
  amount: ethers.parseUnits(AMOUNT, 6),
  approveERC20: true,
  bridgeAddress: USDC_BRIDGE_L1_ADDRESS,
});

// Note that we wait not only for the L1 transaction to complete but also for it to be
// processed by zkSync. If we want to wait only for the transaction to be processed on L1,
// we can use `await depositTx.waitL1Commit()`
await depositTx.wait();
```

### `withdraw`

Withdraws USDC tokens using the custom [USDC bridge](https://github.com/matter-labs/usdc-bridge) from the associated account on L2 network to the target account on L1 network.

#### Inputs

| Parameter                      | Type                                                                     | Description                                                                                           |
| ------------------------------ | ------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------- |
| `transaction.token`            | `Address`                                                                | The address of the USDC token. |
| `transaction.amount`           | `BigNumberish`                                                           | The amount of the token to withdraw.                                                                  |
| `transaction.to?`              | `Address`                                                                | The address of the recipient on L1.                                                        |
| `transaction.bridgeAddress`   | `Address`                                                                | The address of the USDC bridge contract to be used.                                             |
| `transaction.paymasterParams?` | [`PaymasterParams`](/zksync-era/sdk/js/ethers/api/v6/types#paymasterparams)                          | Paymaster parameters.                                                                      |
| `transaction.overrides?`       | [`ethers.Overrides`](https://docs.ethers.org/v6/api/contract/#Overrides) | Transaction's overrides which may be used to pass L2 `gasLimit`, `gasPrice`, `value`, etc. |
| `transaction.approveERC20?`    | `boolean`                                                                | Whether or not should the token approval be performed under the hood. Set this flag to `true` if you withdraw a USDC token and didn't call the `approveERC20` function beforehand.                                          |
| `transaction.approveOverrides?`     | [`ethers.Overrides`](https://docs.ethers.org/v6/api/contract/#Overrides) | Transaction's overrides which may be used to pass L1 `gasLimit`, `gasPrice`, `value`, etc.


```ts
async withdraw(transaction: {
  token: Address;
  amount: BigNumberish;
  to?: Address;
  bridgeAddress: Address;
  paymasterParams?: PaymasterParams;
  overrides?: ethers.Overrides;
  approveERC20?: boolean;
  approveOverrides?: Overrides;
}): Promise<TransactionResponse>
```

#### Examples

```ts
import { Wallet, Provider, types, USDCBridge } from "zksync-ethers";

const PRIVATE_KEY = "<WALLET_PRIVATE_KEY>";
const USDC_TOKEN_L2_ADDRESS = "<USDC_TOKEN_L2_ADDRESS>";
const USDC_BRIDGE_L2_ADDRESS = "<USDC_BRIDGE_L2_ADDRESS>";
const AMOUNT = "5";

const provider = Provider.getDefaultProvider(types.Network.Sepolia);
const wallet = new Wallet(PRIVATE_KEY, provider);
const usdcBridge = new USDCBridge(wallet);

const withdrawTx = await usdcBridge.withdraw({
  token: USDC_TOKEN_L2_ADDRESS,
  amount: ethers.parseUnits(AMOUNT, 6),
  bridgeAddress: USDC_BRIDGE_L2_ADDRESS,
  approveERC20: true,
});
```

### `finalizeWithdrawal`

Proves the inclusion of the L2 -> L1 withdrawal message.

#### Inputs

| Name             | Type                                                                     | Description                                                                                                                                         |
| ---------------- | ------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| `bridgeAddress` | `Address`                                                              | The address of the USDC bridge contract to be used.                                                                                      |
| `withdrawalHash` | `BytesLike`                                                              | Hash of the L2 transaction where the withdrawal was initiated.                                                                                      |
| `index?`         | `number`                                                                 | In case there were multiple withdrawals in one transaction, you may pass an index of the withdrawal you want to finalize. Defaults to 0. |
| `overrides?`     | [`ethers.Overrides`](https://docs.ethers.org/v6/api/contract/#Overrides) | Transaction's overrides which may be used to pass L1 `gasLimit`, `gasPrice`, `value`, etc.                                               |

```ts
async finalizeWithdrawal(bridgeAddress: Address, withdrawalHash: BytesLike, index: number = 0, overrides?: ethers.Overrides): Promise<ethers.ContractTransactionResponse>
```

#### Example

```ts
import { Wallet, Provider, types, USDCBridge } from "zksync-ethers";
import { ethers } from "ethers";

const PRIVATE_KEY = "<WALLET_PRIVATE_KEY>";
const USDC_BRIDGE_L1_ADDRESS = "<USDC_BRIDGE_L1_ADDRESS>";

const provider = Provider.getDefaultProvider(types.Network.Sepolia);
const ethProvider = ethers.getDefaultProvider("sepolia");
const wallet = new Wallet(PRIVATE_KEY, provider, ethProvider);
const usdcBridge = new USDCBridge(wallet);

const WITHDRAWAL_TX_HASH = "<WITHDRAWAL_TX_HASH>";
const finalizeWithdrawalTx = await usdcBridge.finalizeWithdrawal(USDC_BRIDGE_L1_ADDRESS, WITHDRAWAL_TX_HASH);
```

### `isWithdrawalFinalized`

Returns whether the withdrawal transaction is finalized on the L1 network.

#### Inputs

| Name             | Type        | Description                                                                                                                                         |
| ---------------- | ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| `bridgeAddress`  | `Address`   | The address of the USDC bridge contract to be used.                                                                                      |
| `withdrawalHash` | `BytesLike` | Hash of the L2 transaction where the withdrawal was initiated.                                                                                      |
| `index?`         | `number`    | In case there were multiple withdrawals in one transaction, you may pass an index of the withdrawal you want to finalize. Defaults to 0. |

```ts
async isWithdrawalFinalized(bridgeAddress: Address, withdrawalHash: BytesLike, index: number = 0): Promise<boolean>
```

#### Example

```ts
import { Wallet, Provider, types, USDCBridge } from "zksync-ethers";
import { ethers } from "ethers";

const PRIVATE_KEY = "<WALLET_PRIVATE_KEY>";
const USDC_BRIDGE_L1_ADDRESS = "<USDC_BRIDGE_L1_ADDRESS>";

const provider = Provider.getDefaultProvider(types.Network.Sepolia);
const ethProvider = ethers.getDefaultProvider("sepolia");
const wallet = new Wallet(PRIVATE_KEY, provider, ethProvider);
const usdcBridge = new USDCBridge(wallet);

const WITHDRAWAL_TX_HASH = "<WITHDRAWAL_TX_HASH>";
const isFinalized = await usdcBridge.isWithdrawalFinalized(USDC_BRIDGE_L1_ADDRESS, WITHDRAWAL_TX_HASH);
```